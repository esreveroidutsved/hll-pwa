import{c as A,b as g,f as $}from"./DS03veGP.js";import{x as B,P as N,g as W,Q as R,B as T,R as m,S as p,T as S,V}from"./CBi_7G1U.js";import{s as C}from"./BKlc279L.js";import{_ as D,i as x}from"./DnjDMlSY.js";import{d as I}from"./BH8VrEiJ.js";import{s as Q,a as q}from"./CJ--kE2b.js";import{w as P}from"./JMYiYuWg.js";function z(c={}){const{immediate:i=!1,onNeedRefresh:l,onOfflineReady:a,onRegistered:r,onRegisteredSW:o,onRegisterError:t}=c;let s,n;const d=async(e=!0)=>{await n};async function f(){if("serviceWorker"in navigator){if(s=await D(async()=>{const{Workbox:e}=await import("./B9K5rw8f.js");return{Workbox:e}},[],import.meta.url).then(({Workbox:e})=>new e("./sw.js",{scope:"./",type:"classic"})).catch(e=>{t==null||t(e)}),!s)return;s.addEventListener("activated",e=>{(e.isUpdate||e.isExternal)&&window.location.reload()}),s.addEventListener("installed",e=>{e.isUpdate||a==null||a()}),s.register({immediate:i}).then(e=>{o?o("./sw.js",e):r==null||r(e)}).catch(e=>{t==null||t(e)})}}return n=f(),d}function F(c={}){const{immediate:i=!0,onNeedRefresh:l,onOfflineReady:a,onRegistered:r,onRegisteredSW:o,onRegisterError:t}=c,s=P(!1),n=P(!1),d=z({immediate:i,onOfflineReady(){n.set(!0),a==null||a()},onNeedRefresh(){s.set(!0),l==null||l()},onRegistered:r,onRegisteredSW:o,onRegisterError:t});return{needRefresh:s,offlineReady:n,updateServiceWorker:d}}var G=(c,i)=>i(!0),H=$('<button type="button" class="svelte-1kfmiya">Reload</button>'),J=$('<div class="pwa-toast svelte-1kfmiya" role="alert" aria-labelledby="toast-message"><div class="message svelte-1kfmiya"><span id="toast-message"> </span></div> <div class="buttons svelte-1kfmiya"><!> <button type="button" class="svelte-1kfmiya">Close</button></div></div>');function te(c,i){B(i,!0);const[l,a]=Q(),r=()=>q(o,"$needRefresh",l),{needRefresh:o,updateServiceWorker:t}=F({onRegisteredSW(u,v){}});function s(){o.set(!1)}let n=R(r),d=R(()=>r()?"New content available, click on reload button to update.":"");var f=A(),e=N(f);{var E=u=>{var v=J(),_=m(v),k=m(_),L=m(k,!0);p(k),p(_);var w=S(_,2),h=m(w);{var U=b=>{var y=H();y.__click=[G,t],g(b,y)};x(h,b=>{r()&&b(U)})}var j=S(h,2);j.__click=s,p(w),p(v),V(()=>C(L,W(d))),g(u,v)};x(e,u=>{W(n)&&u(E)})}g(c,f),T(),a()}I(["click"]);export{te as default};
